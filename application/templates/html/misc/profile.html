{% extends "html/misc/base.html" %}

{% block links %}

    <link rel="stylesheet" href="../../../static/css/profile.css">

    <script async defer>
        {% if user_info["gender"] %}
            document.querySelector("#gender-option-{{ user_info["gender"] }}").selected = true;
        {% endif %}
    </script>

{% endblock %}

{% block header %}

    <header>
        <h1>User Profile: {{ session["user"] }}</h1>
    </header>

{% endblock %}

{% print(user_info["age"]) %}

{% block content %}

    <form id="profile-form" action="/profile" method="post">
        <div id="profile-edit">
            {% if edit %}
                <a style="background-color: var(--dark-green);"
                   href="."
                   onclick="document.getElementById('profile-form').submit();">Save Changes</a>
            {% else %}
                <a href="/profile/edit">Edit Profile</a>
            {% endif %}
        </div>
        <div id="profile-main">
            <div class="profile-row">
                <div><label for="id-input">ID</label></div>
                <div>
                    <input id="id-input" type="number" value="{{ user_info["user_id"] if user_info["user_id"] }}" disabled>
                </div>
            </div>
            <div class="profile-row">
                <div><label for="first-name-input">First Name</label></div>
                <div>
                    <input id="first-name-input"
                           name="first-name-input"
                           type="text"
                           placeholder="John"
                           autocomplete="on"
                           value="{{ user_info["first_name"] if user_info["first_name"] }}"
                           {% if edit %} autofocus> {% else %} disabled> {% endif %}
                </div>
            </div>
            <div class="profile-row">
                <div><label for="last-name-input">Last Name</label></div>
                <div>
                    <input id="last-name-input"
                           name="last-name-input"
                           type="text"
                           placeholder="John"
                           autocomplete="on"
                           value="{{ user_info["last_name"] if user_info["last_name"] }}"
                           {% if edit %} > {% else %} disabled> {% endif %}
                </div>
            </div>
            <div class="profile-row">
                <div><label for="age-input">Age</label></div>
                <div>
                    <input id="age-input"
                           name="age-input"
                           type="number"
                           placeholder="18"
                           min="0"
                           max="99"
                           autocomplete="on"
                           value="{{ user_info["age"] if user_info["age"] }}"
                           {% if edit %} > {% else %} disabled> {% endif %}
                </div>
            </div>
            <div class="profile-row">
                <div><label for="gender-input">Gender</label></div>
                <div>
                    <select id="gender-input" name="register-gender"
                            {% if edit %} > {% else %} disabled> {% endif %}
                    <option id="gender-option-" value="" disabled aria-disabled="true"
                            selected>{{ "Choose Gender" if edit else "" }}</option>
                    <option id="gender-option-male" value="male">Male</option>
                    <option id="gender-option-female" value="female">Female</option>
                    <option id="gender-option-non-binary" value="non-binary">Non-binary</option>
                    <option id="gender-option-other" value="other">Other</option>
                    <option id="gender-option-none" value="none">Prefer not to say</option>
                    </select>
                </div>
            </div>
            <div class="profile-row">
                <div><label for="email-input">Email</label></div>
                <div>
                    <input id="email-input"
                           name="email-input"
                           type="email"
                           placeholder="john.doe@example.com"
                           autocomplete="on"
                           value="{{ user_info["email"] if user_info["email"] }}"
                           {% if edit %} > {% else %} disabled> {% endif %}
                </div>
            </div>
            <div class="profile-row">
                <div><label for="phone-input">Phone Number</label></div>
                <div>
                    <input id="phone-input"
                           name="phone-input"
                           type="tel"
                           placeholder="087 819 8293"
                           autocomplete="on"
                           value="{{ user_info["phone"] if user_info["phone"] }}"
                           {% if edit %} > {% else %} disabled> {% endif %}
                </div>
            </div>
            {% if not edit %}
                <div class="profile-row">
                    <div id="logout-link">
                        <a class="underlined-link underlined-link-logout" href="/logout">Click here to log out of your account</a>
                    </div>
                </div>
            {% endif %}
        </div>
    </form>


{% endblock %}
