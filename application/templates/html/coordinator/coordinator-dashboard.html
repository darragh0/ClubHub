
{% extends "html/base/base.html" %}

{% block links %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
{% endblock %}

{% block header %}


    <header>
        <h1 style="color: white;">{{ header if header else "Welcome to your dashboard,  " ~ coordinator_name ~ "!" }}</h1>
    </header>



    <br><br>

    
    <style>
        body {
            /* background image */
            background-image: url("{{ url_for('static', filename='png/blue-background-flipped-xy.png') }}");
            background-size: cover;
            background-position: center center;
        }
    </style>
    
    <!-- Club Description -->
    <form id="clubForm" action="{{ url_for('coordinator.save_club_details', club_id=club_id) }}" method="POST">
        <!-- Club Description -->
        <div class="card card-custom">
            <div class="card-body">
                <h5 class="card-title white-txt" id="editable_text1"  contenteditable="false">{{ club_title }} </h5>
                <h6 class="card-subtitle mb-2 t vlight_blue_txt">Club description</h6>
                <p class="card-text white-txt" id="editable_text2" contenteditable="false">{{ club_description }}</p>
                <input type="hidden" name="club_id" value="{{ club_id }}">
                <input type="text" id = "club_name_value" name="club_name" value="{{ club_title }}" style="display:none;"> <!-- Hidden input -->
                <input type="text" id = "club_description_value" name="club_description" value="{{ club_description }}" style="display:none;"> <!-- Hidden input -->
                <button type="button" class="btn btn-warning custom-button" onclick="toggleEditMode('editable_text1', 'club name', this, 'club_name_value');">Edit club name</button>
                <button type="button" class="btn btn-warning custom-button" onclick="toggleEditMode('editable_text2', 'club description', this, 'club_description_value');">Edit description</button>
                <button type="submit" class="btn btn-warning custom-button">Save changes</button>
            </div>
        </div>
    </form>

    
    

    <script>
        // Function to toggle the edit mode of an element
    function toggleEditMode(elementId, field, button, valueID) {
        let editableElement = document.getElementById(elementId);
        let hiddenInput = document.getElementById(valueID);


        if (editableElement.contentEditable === 'false') {
            // Add a border around the text here
            editableElement.style.border = '1px solid #ccc';

            // Enable editing
            editableElement.contentEditable = 'true';
            button.innerText = 'Exit editing mode';
        } else {
            // Disable editing
            editableElement.style.border = '0px solid #ccc';

            editableElement.contentEditable = 'false';
            button.innerText = 'Edit ' + field;
            hiddenInput.value = editableElement.innerText;
        }
    }

    </script>

    <style>
        .list-group-item {
            display: grid;
            grid-template-columns: 120px 400px auto auto; /* Auto size for the date, 1fr (1 fraction) for the remaining space for the event name */
            align-items: center; /* Center vertically */
        }

        .date-column {
            padding-right: 1em; /* Adjust as needed for space between date and event name */
            font-family: monospace;
        }

        .button-column {
            display: flex;
            gap: 10px; /* Adjust the gap between buttons */
        }

        .btn-primary {
            width: 250px; /* Adjust the width according to your preference */
            height: 40px; /* Adjust the height according to your preference */
        }
    </style>

<!-- TODO having issues writing to file here. reading seems to be ok. -->





    <!-- Members -->
    <br>
    <div class="card card-custom">
        <div class="card-body">
            <h5 class="card-title white-txt">Members</h5>
            <h6 class="card-subtitle mb-2 vlight_blue_txt">Click to view a list of members</h6>
            <br>
            <div class="d-flex justify-content-between">
                <a href="{{ url_for('coordinator.view_members', status = 'Approved') }}" class="card-link custom-link"
                   style="margin-left: 100px;">{{ active_users }} Active members</a>
                <a href="{{ url_for('coordinator.view_members', status = 'Pending') }}" class="card-link custom-link"
                   style="margin-right: 100px;">{{ pending_users }} Pending Members</a>
            </div>
        </div>





    </div>
            <!-- EVENTS -->

    <br><br>
    <div class="card card-custom">
        <div class="card-body">
            <h5 class="card-title white-txt">Upcoming events</h5>

        {% for event in limited_events %}
        <ul class="list-group">
            <li class="list-group-item" style="display: inline-flex">
                <span class="date-column dark_link">{{ event.event_date }}</span>
                <span class="event-name-column">
                    <a href="{{ url_for('coordinator.edit_event', event_id=event.event_id) }}" class="card-link dark_link">{{ event.event_name }}</a>
                </span>
                <span class="button-column">
                    <a class="btn btn-primary card-custom custom-hover"
                    href="{{ url_for('coordinator.parview', status='Approved', event_id=event.event_id) }}" role="button">
                    Approved Participants
                    <span class="badge bg-danger">{{ event.approved_participants }}</span>
                </a>
                <a class="btn btn-primary card-custom custom-hover"
                    href="{{ url_for('coordinator.parview', status='Pending', event_id=event.event_id) }}" role="button">
                    Participant requests
                    <span class="badge bg-danger">{{ event.pending_participants }}</span>
                </a>
                </span>
            </li>
        </ul>
        {% endfor %}

            

            <br><a href="{{ url_for('coordinator.see_events', timeline = 'Upcoming') }}" class="card-link dark_link" >View
            More</a><br>
            <!-- past events -->
            <a class="btn btn-warning custom-button"
               href="{{ url_for('coordinator.see_events', timeline = 'Past') }}" role="button">Past Events</a>
               <!-- new events -->

            <a class="btn btn-warning custom-button" href="{{ url_for('coordinator.new_event') }}"
               role="button">Add Event</a>

        </div>
    </div>

{% endblock %}
