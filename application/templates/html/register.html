{% extends "html/base.html" %}

{% block links %}

    <meta id="form-gender-value" data-value="{{ form_gender_value if form_gender_value else '' }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}"/>

{% endblock %}

{% block header %}

    <header>
        <h1>Create an account for ClubHub {{ register_value }}</h1>
    </header>

{% endblock %}

{% block content %}

    <div class="form-container" style="width: 70%">
        <form id="register-form" action="/register" method="post">
            <p>Fields marked with an asterisk<span class="required-star">*</span> are required fields.</p>
            <hr>

            <!-- username -->
            <label for="register-username-input">1. Create a username<span class="required-star"> *</span></label>
            <input id="register-username-input"
                   name="register-username"
                   type="text"
                   placeholder="Username"
                   minlength="5"
                   maxlength="40"
                   value="{{ form_username_value }}"
                   autocomplete="on"
                   required
                   aria-required="true">

            <!-- password -->
            <label for="register-password-input">2. Create a password<span class="required-star"> *</span></label>
            <input id="register-password-input"
                   name="register-password"
                   type="password"
                   placeholder="Password"
                   minlength="5"
                   maxlength="50"
                   autocomplete="on"
                   required
                   aria-required="true">

            <!-- password confirmation -->
            <label for="register-confirm-password-input" style="display: none;"></label>
            <input id="register-confirm-password-input"
                   name="register-confirm-password"
                   type="password"
                   placeholder="Confirm password"
                   autocomplete="on"
                   required
                   aria-required="true">

            <!-- toggle password visibility -->
            <label id="register-show-password-input-label" for="register-show-password-input">
                Show password&nbsp
                <input id="register-show-password-input" type="checkbox" class="show-password-box">
            </label>

            <!-- user type (student or coordinator) -->
            <label>3. User type <span class="required-star"> *</span></label>
            <div id="radio-inputs-container">
                <div>
                    <label for="register-student-input">Student</label>
                    <span>
                        <input name="register-user-type" id="register-student-input" type="radio" value="student">
                    </span>
                </div>
                <div>
                    <label for="register-coordinator-input">Coordinator</label>
                    <span>
                        <input name="register-user-type" id="register-coordinator-input" type="radio" value="coordinator">
                    </span>
                </div>
            </div>

            <!-- first name -->
            <label for="register-first-name-input">4. First name</label>
            <input id="register-first-name-input"
                   name="register-first-name"
                   type="text"
                   placeholder="John"
                   value="{{ form_first_name_value }}"
                   autocomplete="on">

            <label for="register-last-name-input">5. Last name</label>
            <input id="register-last-name-input"
                   name="register-last-name"
                   type="text"
                   placeholder="Doe"
                   value="{{ form_last_name_value }}"
                   autocomplete="on">

            <!-- TODO: Add age? -->

            <!-- email -->
            <label for="register-email-input">6. Email address</label>
            <input id="register-email-input"
                   name="register-email"
                   type="email"
                   placeholder="john.doe@example.com"
                   value="{{ form_email_value }}"
                   autocomplete="on">

            <!-- phone number -->
            <label for="register-phone-input">7. Phone number</label>
            <input id="register-phone-input"
                   name="register-phone"
                   placeholder="087 819 8293"
                   type="tel"
                   value="{{ form_phone_value }}"
                   autocomplete="on">

            <label for="register-gender-input">8. Gender</label>
            <select id="register-gender-input" name="register-gender">
                <option id="gender-option-" value="" disabled aria-disabled="true" selected>Choose gender</option>
                <option id="gender-option-male" value="male">Male</option>
                <option id="gender-option-female" value="female">Female</option>
                <option id="gender-option-non-binary" value="non-binary">Non-binary</option>
                <option id="gender-option-other" value="other">Other</option>
                <option id="gender-option-none" value="none">Prefer not to say</option>
            </select>

            <!-- reCAPTCHA -->
            <div class="g-recaptcha" data-sitekey="{{ config["RECAPTCHA_SITE_KEY"] }}"></div>

            <button class="submit-button" type="submit">Register</button>

            <p>
                <b style="color: var(--light-red);">Note:</b> On submission of this form, you are agreeing to the Terms
                and conditions of service, as set out in our <a href="/privacy-policy">Privacy Policy</a>.
            </p>
        </form>
    </div>

    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script src=" {{ url_for('static', filename='js/register.js') }}"></script>

    <script>
        {% if form_user_type_value == "student" %}
            student_radio.checked = true;
        {% elif form_user_type_value == "coordinator" %}
            coordinator_radio.checked = true;
        {% endif %}
    </script>

{% endblock %}
